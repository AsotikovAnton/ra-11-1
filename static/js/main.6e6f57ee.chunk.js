(this["webpackJsonpra-11-1"]=this["webpackJsonpra-11-1"]||[]).push([[0],{28:function(e,t,a){e.exports=a(42)},33:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(12),o=a.n(c),i=(a(33),a(27)),l=a(6),u=a(2),s=a(5),E=a.n(s),p=a(11);function m(e){return{type:"FETCH_SERVICES_FAILURE",payload:{error:e}}}function d(e){return{type:"FETCH_SERVICES_SUCCESS",payload:e}}function v(e){return{type:"CHANGE_SERVICES_INIT",payload:e}}var S=function(){var e=Object(p.a)(E.a.mark((function e(t){var a,n,r,c,o=arguments;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>1&&void 0!==o[1]?o[1]:null,t({type:"FETCH_SERVICES_REQUEST"}),n=a?"".concat("https://ra-11-serv.herokuapp.com/api/services","/").concat(a):"https://ra-11-serv.herokuapp.com/api/services",e.prev=3,e.next=6,fetch(n);case 6:if((r=e.sent).ok){e.next=9;break}throw new Error(r.statusText);case 9:return e.next=11,r.json();case 11:c=e.sent,t(a?v(c):d({data:c})),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),t(m({error:e.t0.message}));case 18:case"end":return e.stop()}}),e,null,[[3,15]])})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(p.a)(E.a.mark((function e(t,a,n){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"ADD_SERVICES_REQUEST"}),e.prev=1,e.next=4,fetch("https://ra-11-serv.herokuapp.com/api/services",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({name:a,price:n})});case 4:id?t({type:"CHANGE_SERVICES_SUCCESS"}):(t({type:"ADD_SERVICES_SUCCESS"}),S(t)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),t({type:"ADD_SERVICES_FAILURE",payload:{error:e.t0.message}});case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,a,n){return e.apply(this,arguments)}}(),C=function(){var e=Object(p.a)(E.a.mark((function e(t,a,n,r,c,o){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"CHANGE_SERVICES_REQUEST"}),e.prev=1,e.next=4,fetch("https://ra-11-serv.herokuapp.com/api/services",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({id:a,name:n,price:r,content:c})});case 4:e.sent,t({type:"CHANGE_SERVICES_SUCCESS"}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0),t({type:"CHANGE_SERVICES_FAILURE",payload:{error:{error:e.t0.message}}});case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a,n,r,c,o){return e.apply(this,arguments)}}(),h=function(){var e=Object(p.a)(E.a.mark((function e(t,a){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"IS_LOADING_REQUEST"}),e.prev=1,e.next=4,fetch("".concat("https://ra-11-serv.herokuapp.com/api/services","/").concat(a),{method:"DELETE"});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),t({type:"IS_LOADING_FAILURE",payload:{error:e.t0.message}});case 9:return e.prev=9,t({type:"IS_LOADING_SUCCESS"}),S(t),e.finish(9);case 13:case"end":return e.stop()}}),e,null,[[1,6,9,13]])})));return function(t,a){return e.apply(this,arguments)}}();function b(e){var t=Object(u.c)((function(e){return e.serviceAdd})),a=t.item,n=t.loading,c=t.error,o=Object(u.b)(),i=function(e){var t=e.target,a=t.name,n=t.value;o(function(e,t){return{type:"CHANGE_ADD_SERVICE_FIELD",payload:{nameField:e,value:t}}}(a,n))};return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),f(o,a.name,a.price)}},c&&r.a.createElement("div",{className:"error-msg"},"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430!"),r.a.createElement("input",{name:"name",onChange:i,value:a.name}),r.a.createElement("input",{name:"price",onChange:i,value:a.price}),!n&&r.a.createElement("button",{type:"submit",disabled:n},"Save"),n&&r.a.createElement("div",{className:"loading"}))}var _=a(44),g=a(45);var I=function(e){var t=e.match,a=e.history,c=Object(u.c)((function(e){return e.serviceList})),o=c.items,i=c.loading,l=c.error,s=Object(u.c)((function(e){return e.serviceIsLoadng})),E=s.isLoading,p=(s.isError,Object(u.b)());return Object(n.useEffect)((function(){S(p)}),[p]),i?r.a.createElement("div",{className:"loading"}):l?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"error-msg"},"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430!"),r.a.createElement("div",{onClick:function(){S(p)}},"Refresh")):r.a.createElement(r.a.Fragment,null,r.a.createElement(b,null),r.a.createElement("ul",null,o&&o.map((function(e){return r.a.createElement("li",{key:e.id},e.name," ",e.price,r.a.createElement(_.a,{className:"button btn",onClick:function(){return function(e){a.push("".concat(t.url,"/").concat(e))}(e.id)}}),r.a.createElement(g.a,{className:"button",onClick:function(){return function(e){h(p,e)}(e.id)},disabled:E}))}))))},y=a(26);var O=function(e){var t=e.match,a=e.history,c=Object(u.c)((function(e){return e.serviceChange})),o=c.item,i=c.chLoading,l=c.chError,s=Object(u.c)((function(e){return e.serviceList})),E=s.loading,p=s.error,m=Object(n.useState)(!0),d=Object(y.a)(m,2),v=d[0],f=d[1],h=Object(u.b)(),b=Number(t.params.id);Object(n.useEffect)((function(){v||i||a.goBack(),v&&(f(!1),S(h,b))}),[h,i]);var _=function(e){var t=e.target,a=t.name,n=t.value;h(function(e,t){return{type:"CHANGE_SERVICE_FIELD",payload:{nameField:e,value:t}}}(a,n))};return E?r.a.createElement("div",{className:"loading"}):p?r.a.createElement("div",null,r.a.createElement("div",{className:"error-msg"},"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430!"),r.a.createElement("div",{onClick:function(){a.goBack()}},"\u041d\u0430\u0437\u0430\u0434")):r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),C(h,b,o.name,o.price,o.content)},disabled:i,className:"change-form"},r.a.createElement("label",null,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"),r.a.createElement("input",{name:"name",onChange:_,value:o.name}),r.a.createElement("label",null,"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c"),r.a.createElement("input",{name:"price",onChange:_,value:o.price}),r.a.createElement("label",null,"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"),r.a.createElement("input",{name:"content",onChange:_,value:o.content}),r.a.createElement("div",{className:"buttons"},r.a.createElement("button",{type:"button",onClick:function(){a.goBack()}},"\u041e\u0442\u043c\u0435\u043d\u0430"),!i&&r.a.createElement("button",{type:"submit"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))),i&&r.a.createElement("div",{className:"loading"}),l&&r.a.createElement("p",null,l.message))};function R(e){var t=window.location.pathname;return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.a,null,r.a.createElement(l.d,null,r.a.createElement(l.b,{path:"".concat(t,"services/:id"),component:O}),r.a.createElement(l.b,{path:"".concat(t,"services"),component:I}),r.a.createElement(l.a,{exact:!0,from:"".concat(t),to:"".concat(t,"services")}))))}var j=a(10),A=a(1),N={items:[],loading:!1,error:null};var L=a(8),D={item:{name:"",price:""},loading:!1,error:null};var V={item:{id:"",name:"",price:"",content:""},chLoading:!1,chError:null};var k={isLoading:!1,isError:null};var F=Object(j.b)({serviceList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_SERVICES_REQUEST":return Object(A.a)({},e,{loading:!0,error:null});case"FETCH_SERVICES_FAILURE":var a=t.payload.error;return Object(A.a)({},e,{loading:!1,error:a});case"FETCH_SERVICES_SUCCESS":var n=t.payload.data;return Object(A.a)({},e,{items:n,loading:!1,error:null});case"REMOVE_SERVICE":var r=t.payload;return e.items.filter((function(e){return e.id!==r.id}));case"CHANGE_SERVICES_INIT":return Object(A.a)({},e,{loading:!1,error:null});default:return e}},serviceAdd:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_ADD_SERVICE_FIELD":var a=t.payload,n=a.nameField,r=a.value;return Object(A.a)({},e,{item:Object(A.a)({},e.item,Object(L.a)({},n,r))});case"ADD_SERVICES_REQUEST":return Object(A.a)({},e,{loading:!0,error:null});case"ADD_SERVICES_SUCCESS":return Object(A.a)({},D);case"ADD_SERVICES_FAILURE":var c=t.payload.error;return Object(A.a)({},e,{loading:!1,error:c});default:return e}},serviceChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_SERVICE_FIELD":var a=t.payload,n=a.nameField,r=a.value;return Object(A.a)({},e,{item:Object(A.a)({},e.item,Object(L.a)({},n,r))});case"CHANGE_SERVICES_REQUEST":return Object(A.a)({},e,{chLoading:!0,chError:null});case"CHANGE_SERVICES_FAILURE":var c=t.payload.error;return Object(A.a)({},e,{chLoading:!1,chError:c});case"CHANGE_SERVICES_SUCCESS":return Object(A.a)({},V);case"CHANGE_SERVICES_INIT":console.log(t.payload);var o=t.payload,i=o.id,l=o.name,u=o.price,s=o.content;return Object(A.a)({},e,{chLoading:!1,chError:null,item:{id:i,name:l,price:u,content:s}});default:return e}},serviceIsLoadng:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"IS_LOADING_REQUEST":return Object(A.a)({},e,{isLoading:!0});case"IS_LOADING_FAILURE":console.log(t.payload);var a=t.payload.error;return Object(A.a)({},e,{isLoading:!1,isError:a});case"IS_LOADING_SUCCESS":return Object(A.a)({},k);default:return e}}}),U=Object(j.c)(F);o.a.render(r.a.createElement(u.a,{store:U},r.a.createElement(R,null)),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.6e6f57ee.chunk.js.map